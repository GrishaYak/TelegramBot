2025-05-04 20:27:04,433 - telegram.ext.ExtBot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7374799846:AAE54eiWBTEwQrhVKwpt7FbkH_hiMHMCYD0
2025-05-04 20:27:04,434 - telegram.ext.ExtBot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7374799846:AAE54eiWBTEwQrhVKwpt7FbkH_hiMHMCYD0
2025-05-04 20:27:04,437 - asyncio - DEBUG - Using selector: SelectSelector
2025-05-04 20:27:04,511 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap Initialize Application): Starting
2025-05-04 20:27:04,511 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getMe` with parameters `{}`
2025-05-04 20:27:04,520 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-04 20:27:04,597 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000024982807920>
2025-05-04 20:27:04,597 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002498281C8D0> server_hostname='api.telegram.org' timeout=5.0
2025-05-04 20:27:04,670 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000024982834350>
2025-05-04 20:27:04,670 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-04 20:27:04,671 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-04 20:27:04,671 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-04 20:27:04,671 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-04 20:27:04,671 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-04 20:27:04,743 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 04 May 2025 15:27:07 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'255'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-04 20:27:04,744 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7374799846:AAE54eiWBTEwQrhVKwpt7FbkH_hiMHMCYD0/getMe "HTTP/1.1 200 OK"
2025-05-04 20:27:04,744 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-04 20:27:04,744 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-04 20:27:04,744 - httpcore.http11 - DEBUG - response_closed.started
2025-05-04 20:27:04,744 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-04 20:27:04,745 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getMe` finished with return value `{'id': 7374799846, 'is_bot': True, 'first_name': 'Finances', 'username': 'GrishasFinanceBot', 'can_join_groups': True, 'can_read_all_group_messages': False, 'supports_inline_queries': False, 'can_connect_to_business': False, 'has_main_web_app': False}`
2025-05-04 20:27:04,745 - telegram.ext.ExtBot - DEBUG - This Bot is already initialized.
2025-05-04 20:27:04,745 - telegram.ext.Updater - DEBUG - Updater started (polling)
2025-05-04 20:27:04,745 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap delete Webhook): Starting
2025-05-04 20:27:04,745 - telegram.ext.Updater - DEBUG - Deleting webhook
2025-05-04 20:27:04,745 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `deleteWebhook` with parameters `{}`
2025-05-04 20:27:04,746 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-04 20:27:04,746 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-04 20:27:04,747 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-04 20:27:04,747 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-04 20:27:04,747 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-04 20:27:04,816 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 04 May 2025 15:27:07 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'68'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-04 20:27:04,816 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7374799846:AAE54eiWBTEwQrhVKwpt7FbkH_hiMHMCYD0/deleteWebhook "HTTP/1.1 200 OK"
2025-05-04 20:27:04,817 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-04 20:27:04,817 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-04 20:27:04,817 - httpcore.http11 - DEBUG - response_closed.started
2025-05-04 20:27:04,817 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-04 20:27:04,818 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `deleteWebhook` finished with return value `True`
2025-05-04 20:27:04,818 - telegram.ext.Updater - DEBUG - Bootstrap done
2025-05-04 20:27:04,818 - telegram.ext.Updater - DEBUG - Waiting for polling to start
2025-05-04 20:27:04,818 - telegram.ext.Updater - DEBUG - Polling updates from Telegram started
2025-05-04 20:27:04,818 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Starting
2025-05-04 20:27:04,819 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 0}`
2025-05-04 20:27:04,820 - apscheduler.scheduler - INFO - Scheduler started
2025-05-04 20:27:04,820 - telegram.ext.Application - DEBUG - JobQueue started
2025-05-04 20:27:04,820 - telegram.ext.Application - INFO - Application started
2025-05-04 20:27:04,820 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-04 20:27:04,821 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-05-04 20:27:04,821 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-05-04 20:27:04,894 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000024982866090>
2025-05-04 20:27:04,894 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002498281C250> server_hostname='api.telegram.org' timeout=5.0
2025-05-04 20:27:04,969 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000249827658E0>
2025-05-04 20:27:04,970 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-04 20:27:04,971 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-04 20:27:04,971 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-04 20:27:04,972 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-04 20:27:04,972 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-04 20:27:11,439 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 04 May 2025 15:27:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'413'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-04 20:27:11,439 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7374799846:AAE54eiWBTEwQrhVKwpt7FbkH_hiMHMCYD0/getUpdates "HTTP/1.1 200 OK"
2025-05-04 20:27:11,439 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-04 20:27:11,439 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-04 20:27:11,439 - httpcore.http11 - DEBUG - response_closed.started
2025-05-04 20:27:11,440 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-04 20:27:11,440 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 588871053, 'message': {'message_id': 945, 'from': {'id': 5284229459, 'is_bot': False, 'first_name': 'Гриша', 'username': 'InDieptikus', 'language_code': 'ru'}, 'chat': {'id': 5284229459, 'first_name': 'Гриша', 'username': 'InDieptikus', 'type': 'private'}, 'date': 1746372433, 'text': '/start', 'entities': [{'offset': 0, 'length': 6, 'type': 'bot_command'}]}}]`
2025-05-04 20:27:11,440 - telegram.ext.ExtBot - DEBUG - Getting updates: [588871053]
2025-05-04 20:27:11,440 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Гриша', id=5284229459, type=<ChatType.PRIVATE>, username='InDieptikus'), date=datetime.datetime(2025, 5, 4, 15, 27, 13, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Гриша', id=5284229459, is_bot=False, language_code='ru', username='InDieptikus'), group_chat_created=False, message_id=945, supergroup_chat_created=False, text='/start'), update_id=588871053)
2025-05-04 20:27:11,442 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (5284229459, 5284229459) with state None
2025-05-04 20:27:11,444 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 588871054}`
2025-05-04 20:27:11,445 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-04 20:27:11,446 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-04 20:27:11,446 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-04 20:27:11,446 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-04 20:27:11,446 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-04 20:27:11,560 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 5284229459, 'text': 'Что хотите сделать?', 'reply_markup': ReplyKeyboardMarkup(keyboard=((KeyboardButton(text='/delete_me'), KeyboardButton(text='/income')), (KeyboardButton(text='/checkout_alterations'), KeyboardButton(text='/consumption')), (KeyboardButton(text='/checkout_categories'), KeyboardButton(text='/help'))), one_time_keyboard=True)}`
2025-05-04 20:27:11,560 - httpcore.connection - DEBUG - close.started
2025-05-04 20:27:11,561 - httpcore.connection - DEBUG - close.complete
2025-05-04 20:27:11,561 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-04 20:27:11,638 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000024982866FC0>
2025-05-04 20:27:11,639 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002498281C8D0> server_hostname='api.telegram.org' timeout=5.0
2025-05-04 20:27:11,719 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002498272FD70>
2025-05-04 20:27:11,719 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-04 20:27:11,720 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-04 20:27:11,720 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-04 20:27:11,720 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-04 20:27:11,720 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-04 20:27:11,854 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 04 May 2025 15:27:14 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'373'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-04 20:27:11,855 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7374799846:AAE54eiWBTEwQrhVKwpt7FbkH_hiMHMCYD0/sendMessage "HTTP/1.1 200 OK"
2025-05-04 20:27:11,855 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-04 20:27:11,855 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-04 20:27:11,855 - httpcore.http11 - DEBUG - response_closed.started
2025-05-04 20:27:11,855 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-04 20:27:11,855 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 946, 'from': {'id': 7374799846, 'is_bot': True, 'first_name': 'Finances', 'username': 'GrishasFinanceBot'}, 'chat': {'id': 5284229459, 'first_name': 'Гриша', 'username': 'InDieptikus', 'type': 'private'}, 'date': 1746372434, 'text': 'Что хотите сделать?'}`
2025-05-04 20:27:13,174 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 04 May 2025 15:27:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'428'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-04 20:27:13,174 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7374799846:AAE54eiWBTEwQrhVKwpt7FbkH_hiMHMCYD0/getUpdates "HTTP/1.1 200 OK"
2025-05-04 20:27:13,174 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-04 20:27:13,175 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-04 20:27:13,175 - httpcore.http11 - DEBUG - response_closed.started
2025-05-04 20:27:13,175 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-04 20:27:13,175 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 588871054, 'message': {'message_id': 947, 'from': {'id': 5284229459, 'is_bot': False, 'first_name': 'Гриша', 'username': 'InDieptikus', 'language_code': 'ru'}, 'chat': {'id': 5284229459, 'first_name': 'Гриша', 'username': 'InDieptikus', 'type': 'private'}, 'date': 1746372435, 'text': '/checkout_categories', 'entities': [{'offset': 0, 'length': 20, 'type': 'bot_command'}]}}]`
2025-05-04 20:27:13,175 - telegram.ext.ExtBot - DEBUG - Getting updates: [588871054]
2025-05-04 20:27:13,175 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Гриша', id=5284229459, type=<ChatType.PRIVATE>, username='InDieptikus'), date=datetime.datetime(2025, 5, 4, 15, 27, 15, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=20, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Гриша', id=5284229459, is_bot=False, language_code='ru', username='InDieptikus'), group_chat_created=False, message_id=947, supergroup_chat_created=False, text='/checkout_categories'), update_id=588871054)
2025-05-04 20:27:13,176 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (5284229459, 5284229459) with state 1
2025-05-04 20:27:13,176 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 5284229459, 'text': 'За вами числятся следующие категории: '}`
2025-05-04 20:27:13,177 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-04 20:27:13,177 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 588871055}`
2025-05-04 20:27:13,178 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-04 20:27:13,178 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-04 20:27:13,178 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-04 20:27:13,178 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-04 20:27:13,178 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-04 20:27:13,179 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-04 20:27:13,179 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-04 20:27:13,179 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-04 20:27:13,179 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-04 20:27:13,325 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 04 May 2025 15:27:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'471'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-04 20:27:13,326 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7374799846:AAE54eiWBTEwQrhVKwpt7FbkH_hiMHMCYD0/sendMessage "HTTP/1.1 200 OK"
2025-05-04 20:27:13,326 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-04 20:27:13,326 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-04 20:27:13,326 - httpcore.http11 - DEBUG - response_closed.started
2025-05-04 20:27:13,326 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-04 20:27:13,327 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 948, 'from': {'id': 7374799846, 'is_bot': True, 'first_name': 'Finances', 'username': 'GrishasFinanceBot'}, 'chat': {'id': 5284229459, 'first_name': 'Гриша', 'username': 'InDieptikus', 'type': 'private'}, 'date': 1746372435, 'text': 'За вами числятся следующие категории:'}`
2025-05-04 20:27:13,331 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 5284229459, 'text': '1) "Интересной"\n2) "Шава"\n'}`
2025-05-04 20:27:13,333 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-04 20:27:13,333 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-04 20:27:13,333 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-04 20:27:13,334 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-04 20:27:13,334 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-04 20:27:13,474 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 04 May 2025 15:27:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'374'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-04 20:27:13,474 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7374799846:AAE54eiWBTEwQrhVKwpt7FbkH_hiMHMCYD0/sendMessage "HTTP/1.1 200 OK"
2025-05-04 20:27:13,474 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-04 20:27:13,474 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-04 20:27:13,475 - httpcore.http11 - DEBUG - response_closed.started
2025-05-04 20:27:13,475 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-04 20:27:13,475 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 949, 'from': {'id': 7374799846, 'is_bot': True, 'first_name': 'Finances', 'username': 'GrishasFinanceBot'}, 'chat': {'id': 5284229459, 'first_name': 'Гриша', 'username': 'InDieptikus', 'type': 'private'}, 'date': 1746372435, 'text': '1) "Интересной"\n2) "Шава"'}`
2025-05-04 20:27:13,476 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 5284229459, 'text': 'Хотите удалить какие-то из них?', 'reply_markup': ReplyKeyboardMarkup(keyboard=((KeyboardButton(text='/delete_categories'),), (KeyboardButton(text='/escape'),)), one_time_keyboard=True)}`
2025-05-04 20:27:13,476 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-04 20:27:13,477 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-04 20:27:13,477 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-04 20:27:13,477 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-04 20:27:13,477 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-04 20:27:13,595 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 04 May 2025 15:27:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'430'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-04 20:27:13,595 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7374799846:AAE54eiWBTEwQrhVKwpt7FbkH_hiMHMCYD0/sendMessage "HTTP/1.1 200 OK"
2025-05-04 20:27:13,595 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-04 20:27:13,595 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-04 20:27:13,596 - httpcore.http11 - DEBUG - response_closed.started
2025-05-04 20:27:13,596 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-04 20:27:13,596 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 950, 'from': {'id': 7374799846, 'is_bot': True, 'first_name': 'Finances', 'username': 'GrishasFinanceBot'}, 'chat': {'id': 5284229459, 'first_name': 'Гриша', 'username': 'InDieptikus', 'type': 'private'}, 'date': 1746372435, 'text': 'Хотите удалить какие-то из них?'}`
2025-05-04 20:27:15,047 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 04 May 2025 15:27:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'426'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-04 20:27:15,047 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7374799846:AAE54eiWBTEwQrhVKwpt7FbkH_hiMHMCYD0/getUpdates "HTTP/1.1 200 OK"
2025-05-04 20:27:15,047 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-04 20:27:15,047 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-04 20:27:15,048 - httpcore.http11 - DEBUG - response_closed.started
2025-05-04 20:27:15,048 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-04 20:27:15,049 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 588871055, 'message': {'message_id': 951, 'from': {'id': 5284229459, 'is_bot': False, 'first_name': 'Гриша', 'username': 'InDieptikus', 'language_code': 'ru'}, 'chat': {'id': 5284229459, 'first_name': 'Гриша', 'username': 'InDieptikus', 'type': 'private'}, 'date': 1746372437, 'text': '/delete_categories', 'entities': [{'offset': 0, 'length': 18, 'type': 'bot_command'}]}}]`
2025-05-04 20:27:15,049 - telegram.ext.ExtBot - DEBUG - Getting updates: [588871055]
2025-05-04 20:27:15,050 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Гриша', id=5284229459, type=<ChatType.PRIVATE>, username='InDieptikus'), date=datetime.datetime(2025, 5, 4, 15, 27, 17, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=18, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Гриша', id=5284229459, is_bot=False, language_code='ru', username='InDieptikus'), group_chat_created=False, message_id=951, supergroup_chat_created=False, text='/delete_categories'), update_id=588871055)
2025-05-04 20:27:15,050 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (5284229459, 5284229459) with state delete_categories_which
2025-05-04 20:27:15,050 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 5284229459, 'text': 'При удалении категории будут удалены все записи с этой категорией. Напишите номера категорий, которые вы хотите удалить. Например: 1,2,4-6'}`
2025-05-04 20:27:15,051 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-04 20:27:15,052 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 588871056}`
2025-05-04 20:27:15,053 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-04 20:27:15,053 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-04 20:27:15,054 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-04 20:27:15,054 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-04 20:27:15,054 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-04 20:27:15,055 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-04 20:27:15,055 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-04 20:27:15,056 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-04 20:27:15,056 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-04 20:27:15,262 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 04 May 2025 15:27:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'957'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-04 20:27:15,262 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7374799846:AAE54eiWBTEwQrhVKwpt7FbkH_hiMHMCYD0/sendMessage "HTTP/1.1 200 OK"
2025-05-04 20:27:15,262 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-04 20:27:15,263 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-04 20:27:15,263 - httpcore.http11 - DEBUG - response_closed.started
2025-05-04 20:27:15,263 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-04 20:27:15,263 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 952, 'from': {'id': 7374799846, 'is_bot': True, 'first_name': 'Finances', 'username': 'GrishasFinanceBot'}, 'chat': {'id': 5284229459, 'first_name': 'Гриша', 'username': 'InDieptikus', 'type': 'private'}, 'date': 1746372437, 'text': 'При удалении категории будут удалены все записи с этой категорией. Напишите номера категорий, которые вы хотите удалить. Например: 1,2,4-6'}`
2025-05-04 20:27:18,726 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 04 May 2025 15:27:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'352'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-04 20:27:18,726 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7374799846:AAE54eiWBTEwQrhVKwpt7FbkH_hiMHMCYD0/getUpdates "HTTP/1.1 200 OK"
2025-05-04 20:27:18,727 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-04 20:27:18,727 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-04 20:27:18,727 - httpcore.http11 - DEBUG - response_closed.started
2025-05-04 20:27:18,727 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-04 20:27:18,727 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 588871056, 'message': {'message_id': 953, 'from': {'id': 5284229459, 'is_bot': False, 'first_name': 'Гриша', 'username': 'InDieptikus', 'language_code': 'ru'}, 'chat': {'id': 5284229459, 'first_name': 'Гриша', 'username': 'InDieptikus', 'type': 'private'}, 'date': 1746372440, 'text': '1,2'}}]`
2025-05-04 20:27:18,727 - telegram.ext.ExtBot - DEBUG - Getting updates: [588871056]
2025-05-04 20:27:18,728 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Гриша', id=5284229459, type=<ChatType.PRIVATE>, username='InDieptikus'), date=datetime.datetime(2025, 5, 4, 15, 27, 20, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Гриша', id=5284229459, is_bot=False, language_code='ru', username='InDieptikus'), group_chat_created=False, message_id=953, supergroup_chat_created=False, text='1,2'), update_id=588871056)
2025-05-04 20:27:18,728 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (5284229459, 5284229459) with state delete_categories
2025-05-04 20:27:18,728 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 588871057}`
2025-05-04 20:27:18,729 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-04 20:27:18,730 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-04 20:27:18,730 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-04 20:27:18,730 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-04 20:27:18,730 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-04 20:27:18,734 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 5284229459, 'text': 'Готово!', 'reply_markup': ReplyKeyboardMarkup(keyboard=((KeyboardButton(text='/delete_me'), KeyboardButton(text='/income')), (KeyboardButton(text='/checkout_alterations'), KeyboardButton(text='/consumption')), (KeyboardButton(text='/checkout_categories'), KeyboardButton(text='/help'))), one_time_keyboard=True)}`
2025-05-04 20:27:18,735 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-04 20:27:18,736 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-04 20:27:18,736 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-04 20:27:18,736 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-04 20:27:18,736 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-04 20:27:18,842 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 04 May 2025 15:27:21 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'311'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-04 20:27:18,842 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7374799846:AAE54eiWBTEwQrhVKwpt7FbkH_hiMHMCYD0/sendMessage "HTTP/1.1 200 OK"
2025-05-04 20:27:18,842 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-04 20:27:18,843 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-04 20:27:18,843 - httpcore.http11 - DEBUG - response_closed.started
2025-05-04 20:27:18,843 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-04 20:27:18,843 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 954, 'from': {'id': 7374799846, 'is_bot': True, 'first_name': 'Finances', 'username': 'GrishasFinanceBot'}, 'chat': {'id': 5284229459, 'first_name': 'Гриша', 'username': 'InDieptikus', 'type': 'private'}, 'date': 1746372441, 'text': 'Готово!'}`
2025-05-04 20:27:28,806 - telegram.ext.Application - DEBUG - Application received stop signal. Shutting down.
2025-05-04 20:27:28,806 - telegram.ext.Updater - DEBUG - Stopping Updater
2025-05-04 20:27:28,806 - telegram.ext.Updater - DEBUG - Waiting background polling task to finish up.
2025-05-04 20:27:28,806 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 04 May 2025 15:27:31 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-04 20:27:28,807 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7374799846:AAE54eiWBTEwQrhVKwpt7FbkH_hiMHMCYD0/getUpdates "HTTP/1.1 200 OK"
2025-05-04 20:27:28,807 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-04 20:27:28,807 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-04 20:27:28,807 - httpcore.http11 - DEBUG - response_closed.started
2025-05-04 20:27:28,807 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-04 20:27:28,807 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-05-04 20:27:28,807 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-05-04 20:27:28,808 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Cancelled
2025-05-04 20:27:28,808 - telegram.ext.Updater - DEBUG - Calling `get_updates` one more time to mark all fetched updates as read.
2025-05-04 20:27:28,808 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 0, 'offset': 588871057}`
2025-05-04 20:27:28,808 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-04 20:27:28,808 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-04 20:27:28,809 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-04 20:27:28,809 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-04 20:27:28,809 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-04 20:27:28,880 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 04 May 2025 15:27:31 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-04 20:27:28,881 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7374799846:AAE54eiWBTEwQrhVKwpt7FbkH_hiMHMCYD0/getUpdates "HTTP/1.1 200 OK"
2025-05-04 20:27:28,881 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-04 20:27:28,881 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-04 20:27:28,881 - httpcore.http11 - DEBUG - response_closed.started
2025-05-04 20:27:28,881 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-04 20:27:28,881 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-05-04 20:27:28,882 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-05-04 20:27:28,882 - telegram.ext.Updater - DEBUG - Updater.stop() is complete
2025-05-04 20:27:28,882 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-05-04 20:27:28,882 - telegram.ext.Application - DEBUG - Waiting for update_queue to join
2025-05-04 20:27:28,883 - telegram.ext.Application - DEBUG - Application stopped fetching of updates.
2025-05-04 20:27:28,883 - telegram.ext.Application - DEBUG - Waiting for running jobs to finish
2025-05-04 20:27:28,883 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-05-04 20:27:28,883 - telegram.ext.Application - DEBUG - JobQueue stopped
2025-05-04 20:27:28,883 - telegram.ext.Application - DEBUG - Waiting for `create_task` calls to be processed
2025-05-04 20:27:28,883 - telegram.ext.Application - INFO - Application.stop() complete
2025-05-04 20:27:28,884 - httpcore.connection - DEBUG - close.started
2025-05-04 20:27:28,884 - httpcore.connection - DEBUG - close.started
2025-05-04 20:27:28,884 - httpcore.connection - DEBUG - close.complete
2025-05-04 20:27:28,884 - httpcore.connection - DEBUG - close.complete
2025-05-04 20:27:28,885 - telegram.ext.ExtBot - DEBUG - This Bot is already shut down. Returning.
2025-05-04 20:27:28,885 - telegram.ext.Updater - DEBUG - Shut down of Updater complete
